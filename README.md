### **이해한 내용 정리**

1. 과제로 구현해야 하는 시스템은 뱅킹 시스템에 종속적이다.
   1. 하지만 뱅킹 시스템이 정상적으로 작동하지는 않는다. (HOST가 올바르지 않기에)
   2. 따라서 서버를 열고 테스트 함에 있어서는 뱅킹 시스템이 마비되었다고 가정한다. (HOST를 바꿔서 뱅킹 시스템이 정상작동한다면 해당 프로젝트도 정상 작동을 할 수 있게 구현)
   3. 코드 로직에서는 뱅킹 시스템이 정상적인 응답을 내뱉는다고 가정하고 코드를 작성한다.
   4. 해당 사항이 정상 작동함은 테스트 코드를 통해 확인해본다.

2. 과제 시스템은 프록시 서버와 유사하게 보인다. 뱅킹 시스템 전(이전)처리와 후처리를 담당하고 클라이언트에 응답을 보내준다.
   1. 그렇다고 해서 단순히 요청을 전달하는 역할만 하는건 아닐꺼야..

3. RDB가 제약사항에 있는데, 어떻게 활용하라는 것일까.
   1. 뱅킹 시스템이다보니까, 클라에서 날아오는 요청을 기록하고, 의심되는 정황을 파악해서 전처리를 할까? -> 이건 나중에
      1. ex) 5분 이내 계좌이체를 5건 이상한다면 의심정황
         1. 매 요청마다 쿼리 보내서 의심정황 포착?
         2. 스케줄러를 통해서 의심되는 사람을 테이블로 분리?

4. 뱅킹 시스템에 종속된 서버인데, 테스트 코드를 어떻게 짤까?
   1. 매번 직접 뱅킹 시스템에 요청을 보내는 것은 좋은 테스트 코드가 아니다. mock 처리를 하자!
   2. 요청에 있어서 정상 응답이 날아왔다는 mock(JsonObject)를 만들어서 후처리가 정상적으로 되는지 확인할까?
   3. 아니면, 뱅킹 시스템을 현재 사용할 수 없지만, 몇몇 케이스를 분리해서 직접 요청을 안보내고 뱅킹시스템 결과를 매핑할까?

5. 이체결과 조회와 같은 API는 서버 자체에서 구현하는 것도 괜찮지 않을까? 네트워크를 덜 타도 되니까, 속도의 향상을 기대할 수 있음.

1. CI 구축

### 계좌이체 flow (kb은행)

1. 이체를 누른다.
2. 받는 사람의 계좌 정보 입력
3. 원하는 금액을 입력
   1. 자신의 금액보다 높으면 Fail
4. 내 통장 표시, 상대방 통장 표시
5. 상대방 이름, 계좌, 금액 confirm
   1. 존재 하지 않다면 Fail
6. 비밀번호 입력
   1. 틀리면 Fail
7. 완료

### **필수 구현 요구사항**

1. 사용자의 계좌 등록
   1. validation
2. 등록된 계좌를 통해 다른 사람 계좌로 계좌이체하기 (두 계좌가 등록되야하나?, 당근페이이니까 계좌 테이블이 있고 연결짓는 형식?)
   1. 요청 형식 validation

### **구현 세부사항**

1. 뱅킹 시스템 API의 응답이 지연되는 경우도 있다고 가정하기.
   1. 특정 시간이 지나면 클라에 지연응답을 보내버리기. 데드락같은 상황을 피하기 위해
2. 사용자 인증과 관리를 고려안해도 된다. 임의의 user_id 사용
   1. 인증인가 생략하고 요청에 user_id를 삽입해서 보내기


**효율적인 설계의 KEY : 뱅킹 API를 최소화 한다.**

### **결과물**

1. 소스코드
2. ERD 캡쳐화면
3. 문제 해결 전략
   1. 내가 고민했던 것을 표현
      1. 테스트코드를 어떻게 작성해야하나
         1. 매번 뱅킹서버로 요청을 보낼 순 없다.. → Mock 사용
      2. 어떻게 안전한 서버를 구축하느냐
         1. validation 철저히
      3. 단기간 거래량을 측정하고 싶은데 매번 이체마다 order by는 너무 성능 저하가 있을듯
         1. 스케줄러로 테이블 관리
         2. 더 빠르게 하려면 인덱싱을 걸어볼까? record에 삭제나 수정은 없으니까!
      4. 뱅킹 서비스에 이체결과 조회가 있는데, 사용자의 이체결과를 조회할때 내 서버에 있으면 더 빠르지 않을까?
4. API 명세
5. 로컬 구동 가이드와 README